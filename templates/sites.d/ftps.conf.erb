<VirtualHost <%= @ipaddress %>>

Include /etc/proftpd/users.d/<%= @vhost_name %>.conf

ServerName                      "<%= @server_name %>"
ServerIdent                     on "<%= @server_ident %>"
ServerAdmin                     <%= @server_admin %>
Port                            <%= @port %>
PassivePorts                    <%= @passive_ports %>

<IfModule mod_tls.c>
TLSEngine                       on
TLSRequired                     <%= @tls_required %>
TLSCipherSuite                  <%= @tls_cipher %>
TLSOptions                      <%= @tls_options %>
TLSProtocol                     <%= @tls_protocol %>
TLSCACertificateFile            <%= @tls_ca_cert %>
TLSRSACertificateFile           <%= @tls_rsa_cert %>
TLSRSACertificateKeyFile        <%= @tls_rsa_key %>
TLSCertificateChainFile         <%= @tls_rsa_chain %>
TLSVerifyClient                 off
TLSRenegotiate                  <%= @tls_renegotiate %>
</IfModule>

DisplayLogin                    welcome.msg
PathDenyFilter                  \.ftp[a-z]+$

Umask                           0006 0007

DeleteAbortedStores             on
MaxClientsPerHost               <%= @max_clients %>
MaxLoginAttempts                <%= @max_loginattempts %>
DefaultRoot                     <%= @default_root %>
AllowOverwrite                  <%= @allowoverwrite %>

TimesGMT                        off

TLSLog                          <%= @tls_log %>
TransferLog                     <%= @transfer_log %>
ExtendedLog                     <%= @extended_log %> all<% @custom_logformat.each do |logformat| -%> <%=logformat -%><% end %>
WtmpLog                         off

</VirtualHost>
